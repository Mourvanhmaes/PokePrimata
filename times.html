<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokeprimata - Times</title>
    <link rel="shortcut icon" href="img/logo_pokebola.svg" type="image/x-icon">
    <link rel="stylesheet" href="teams.css">
</head>
<body>
    
   <header>
        <div class="m_header_home">
            <a href="index.html">
                <img src="img/logo_pokebola.svg" alt="logo">
                <h1>POKEPRIMATA</h1>
            </a>
        </div>
        <nav class="m_header_nav">
            <a href="index.html" class="m_header_a m_header_marcado">Inicio</a>
            <a href="times.html" class="m_header_a">Times</a>
            <a href="pokemon.html" class="m_header_a">Pokémon</a>
            <a href="favorites.html" class="m_header_a">Favoritos</a>
            <a href="jogo.html" class="m_header_a">Jogos</a>
        </nav>
        <div class="m_header_direito">
            <a href="#"><img src="img/lupa.svg" alt="lupa" class="m_header_lupa"></a>
            <a href="login.html" class="m_header_botao_login">LOGIN</a>
            <img src="img/menu.svg" alt="menu" class="m_header_menu" onclick="m_menu_lateral()">
        </div>
    </header>
    <div class="m_menu_lateral">
        <nav>
            <div class="m_lat_nav">
                <a href="index.html" class="m_lat_a">
                    <img src="img/house.svg" alt="house">
                    Inicio
                </a>
            </div>
            <div class="m_lat_nav">
                <a href="#" class="m_lat_a">
                    <img src="img/sword.png" alt="espada">
                    Times
                </a>
            </div>
            <div class="m_lat_nav">
                <a href="pokemon.html" class="m_lat_a">
                    <img src="img/poke_icon.png" alt="pokebola">
                    Pokémon
                </a>
            </div>
            <div class="m_lat_nav">
                <a href="#" class="m_lat_a">
                    <img src="img/star.svg" alt="star">
                    Favoritos
                </a>
            </div>
            <div class="m_lat_nav">
                <a href="jogo.html" class="m_lat_a">
                    <img src="img/controller.svg" alt="controller">
                    Jogos
                </a>
            </div>
        </nav>
        <br>
        <img src="img/poke_primata.svg" alt="logo" class="m_menu_logo">
        <h1>POKEPRIMATA</h1>
    </div>
    <main class="t_main">
        <section class="team-hero">
            <h1 class="team-title">Times</h1>
            <p class="team-sub">Seus Pokémon de time estão aqui!</p>
        </section>
        <div class="team-controls">
            <button class="team-clear" onclick="clearTeams()">Limpar Todos</button>
            <button class="back-btn" onclick="goToMain()">← Voltar à Lista Principal</button>
        </div>
        <div class="team-list" id="teams-container">
            <!-- Os cards serão inseridos aqui via JavaScript -->
        </div>
    </main>

    <script>
        function getFavorites() {
            return JSON.parse(localStorage.getItem('favorites') || '[]');
        }

        function getTeams() {
            return JSON.parse(localStorage.getItem('teams') || '[]');
        }

        function clearTeams() {
            if (confirm('Tem certeza que deseja limpar todos os times?')) {
                localStorage.removeItem('teams');
                loadTeams();
            }
        }

        function toggleFavorite(id, btn) {
            let favorites = getFavorites();
            let isFav = favorites.includes(id);
            if (isFav) {
                favorites = favorites.filter(f => f !== id);
                btn.innerHTML = '♡';
                btn.style.color = 'gray';
            } else {
                favorites.push(id);
                btn.innerHTML = '♥';
                btn.style.color = 'red';
            }
            localStorage.setItem('favorites', JSON.stringify(favorites));
        }

        function toggleTeam(id, btn) {
            let teams = getTeams();
            let isTeam = teams.includes(id);
            if (isTeam) {
                teams = teams.filter(t => t !== id);
                btn.innerHTML = '☆';
                btn.style.color = 'gray';
            } else {
                teams.push(id);
                btn.innerHTML = '★';
                btn.style.color = 'gold';
            }
            localStorage.setItem('teams', JSON.stringify(teams));
            // Remove o card imediatamente se removido do time
            if (isTeam) {
                btn.closest('.team-card').remove();
                if (document.querySelectorAll('.team-card').length === 0) {
                    document.getElementById('teams-container').innerHTML = '<p class="no-teams">Nenhum Pokémon adicionado ao time ainda. <a href="index.html">Adicione alguns!</a></p>';
                }
            }
        }

        async function loadTeams() {
            let teams = getTeams();
            let container = document.getElementById('teams-container');
            
            if (teams.length === 0) {
                container.innerHTML = '<p class="no-teams">Nenhum Pokémon adicionado ao time ainda. <a href="index.html">Adicione alguns!</a></p>';
                return;
            }

            container.innerHTML = ''; // Limpa o container

            for (let id of teams) {
                try {
                    let response = await fetch(`https://pokeapi.co/api/v2/pokemon/${id}`);
                    if (!response.ok) throw new Error('Pokémon não encontrado');
                    let data = await response.json();
                    let img = data.sprites.other['official-artwork'].front_default || data.sprites.front_default;
                    let types = data.types.map(t => t.type.name);
                    let favorites = getFavorites();
                    let isFav = favorites.includes(id);
                    let heart = isFav ? '♥' : '♡';
                    let heartColor = isFav ? 'red' : 'gray';
                    let heartTitle = isFav ? 'Remover dos Favoritos' : 'Adicionar aos Favoritos';
                    
                    let cardHTML = `
                        <div class="team-card" onclick="viewPokemon(${data.id})" style="position: relative;">
                            <div class="team-info">
                                <span class="team-id">#${String(data.id).padStart(3, "0")}</span>
                                <h2 class="team-name">${data.name.toUpperCase()}</h2>
                                <div class="m_poke_tipo">
                                    ${types.map(t => `<h4 class="m_${t}">${t.charAt(0).toUpperCase() + t.slice(1)}</h4>`).join('')}
                                </div>
                            </div>

                            <img src="${img}" alt="${data.name}" class="team-img">

                            <!-- Botões lado a lado no topo-direito -->
                            <div class="team-actions" style="position:absolute; top:10px; right:10px; display:flex; gap:8px; align-items:center;">
                                <button
                                    class="m_heart_btn"
                                    title="${heartTitle}"
                                    onclick="toggleFavorite(${data.id}, this); event.stopPropagation();"
                                    style="border-radius:50%; width:30px; height:30px; border:none; background-color:rgba(255,255,255,0.7); font-size:16px; cursor:pointer; color:${heartColor}; position:static;">
                                    ${heart}
                                </button>

                                <button
                                    class="m_star_btn"
                                    title="Remover do Time"
                                    onclick="toggleTeam(${data.id}, this); event.stopPropagation();"
                                    style="border-radius:50%; width:30px; height:30px; border:none; background-color:rgba(255,255,255,0.7); font-size:16px; cursor:pointer; color:gold; position:static;">
                                    ★
                                </button>
                            </div>
                        </div>
                    `;
                    container.innerHTML += cardHTML;
                } catch (error) {
                    console.error('Erro ao carregar Pokémon:', id, error);
                    container.innerHTML += `<p class="no-teams">Erro ao carregar Pokémon #${id}</p>`;
                }
            }
        }

        function viewPokemon(id) {
            localStorage.setItem("dados", JSON.stringify(id));
            window.location.href = "pokemon.html";
        }

        function goToMain() {
            window.location.href = "index.html";
        }

        function m_menu_lateral() {
            let menu = document.querySelector(".m_menu_lateral");
            if (m_cont_menu == 0) {
                menu.style.right = "0";
                m_cont_menu = 1;
            } else {
                menu.style.right = "-100%";
                m_cont_menu = 0;
            }
        }

        let m_cont_menu = 0;

        // Carrega os times ao inicializar a página
        window.addEventListener('load', loadTeams);
    </script>
      <footer>
        <div class="m_f_principal">
            <div class="m_f_titulo">
                <div class="m_f_logo">
                    <img src="img/logo_pokebola.svg" alt="logo">
                    <h2>POKEPRIMATA</h2>
                </div>
                <h3>Projeto Acadêmico</h3>
                <div class="m_f_conts">
                    <a href="https://web.whatsapp.com/" target="_blank"><img src="img/whatsapp.svg" alt="whatsapp"></a>
                    <a href="https://mail.google.com/mail/u/0/" target="_blank"><img src="img/envelope.svg" alt="envelope"></a>
                    <a href="https://github.com/Mourvanhmaes/PokePrimata" target="_blank"><img src="img/github.svg" alt="github"></a>
                </div>
            </div>
            <div class="m_f_nav">
                <div class="m_f_nav_t">
                    <p>Navegação</p>
                    <a href="index.html">Inicio</a>
                    <a href="pokemon.html">Pokémon</a>
                    <a href="times.html">Times</a>
                    <a href="jogo.html">Jogos</a>
                    <a href="favoritos.html">Favoritos</a>
                </div>
            </div>
            <div class="m_f_nav">
                <div class="m_f_nav_t">
                    <p>Suporte</p>
                    <a href="mailto:mourvanhmaes@gmail.com">Contato</a>
                    <a href="mailto:mourvanhmaes@gmail.com">E-mail</a>
                </div>
            </div>
            <div class="m_f_nav">
                <div class="m_f_nav_t">
                    <p>FAQ</p>
                    <a href="mailto:mourvanhmaes@gmail.com?subject=Encontrei%20um%20bug%20no%20site">Reportar Bug</a>
                    <a href="https://www.google.com/search?q=politicas+do+site&sca_esv=c66570702dbaae6e&sxsrf=AE3TifMz6JIXSNWHFVbtZ0JCiXc-lOa-tw%3A1761413492178&ei=dAn9aMrSCsDa5OUP97XzgAc&ved=0ahUKEwjK3IPM8L-QAxVALbkGHffaHHAQ4dUDCBA&uact=5&oq=politicas+do+site&gs_lp=Egxnd3Mtd2l6LXNlcnAiEXBvbGl0aWNhcyBkbyBzaXRlMgQQABgeMgYQABgFGB4yCBAAGIAEGKIEMggQABiABBiiBDIFEAAY7wVI3w1QAFi0DHAAeAGQAQCYAZABoAGLCqoBBDAuMTC4AQPIAQD4AQGYAgigApsIwgIGEAAYBxgewgIIEAAYgAQYywHCAggQABgIGAcYHsICCBAAGAUYBxgewgIIEAAYBRgeGA3CAggQABgIGB4YDZgDAJIHAzAuOKAHoDqyBwMwLji4B5sIwgcDMC44yAcP&sclient=gws-wiz-serp" target="_blank">Politicas</a>
                    <a href="https://www.google.com/search?q=privacidade+do+site&sca_esv=c66570702dbaae6e&sxsrf=AE3TifMkMXTY1okYdeE1NRkUaD5tIGR0bw%3A1761413421554&ei=LQn9aJLPIefR5OUP16e5yQU&ved=0ahUKEwjSma2q8L-QAxXnKLkGHddTLlkQ4dUDCBA&uact=5&oq=privacidade+do+site&gs_lp=Egxnd3Mtd2l6LXNlcnAiE3ByaXZhY2lkYWRlIGRvIHNpdGUyBhAAGBYYHjIGEAAYFhgeMgYQABgWGB4yCBAAGIAEGKIEMgUQABjvBTIFEAAY7wUyCBAAGIAEGKIEMggQABiABBiiBEjwMVDXBliBMXADeAGQAQCYAaIBoAH0FKoBBDAuMjC4AQPIAQD4AQGYAhegAtAVqAIUwgIHECMY6gIYJ8ICDRAjGMkCGPAFGOoCGCfCAhAQABgDGI8BGOoCGLQC2AEBwgIQEC4YAxiPARjqAhi0AtgBAcICBBAjGCfCAgoQABiABBiKBRhDwgILEAAYgAQYsQMYgwHCAggQLhiABBixA8ICBBAAGAPCAggQABiABBixA8ICExAuGIAEGIoFGEMYsQMYxwEY0QPCAg4QLhiABBixAxjHARjRA8ICDhAAGIAEGIoFGLEDGIMBwgINEAAYgAQYigUYQxixA8ICDhAuGIAEGMcBGK8BGJgFwgIFEAAYgATCAgoQABiABBgKGLEDwgIHEAAYgAQYCsICBRAuGIAEwgIUEC4YgAQYlwUY3AQY3gQY4ATYAQGYAwm6BgYIARABGAqSBwQzLjIwoAeiiAGyBwQwLjIwuAe9FcIHBjAuMTcuNsgHQg&sclient=gws-wiz-serp" target="_blank">Privacidade</a>
                    <a href="https://www.google.com/search?q=termos+do+site&sca_esv=c66570702dbaae6e&sxsrf=AE3TifNDrcMUNnCVH8zBjbgVqeFtAgg6yA%3A1761413461757&ei=VQn9aM2DLtON5OUP8dq8YA&ved=0ahUKEwiNgsO98L-QAxXTBrkGHXEtDwwQ4dUDCBA&uact=5&oq=termos+do+site&gs_lp=Egxnd3Mtd2l6LXNlcnAiDnRlcm1vcyBkbyBzaXRlMgYQABgHGB4yBhAAGAcYHjIGEAAYBxgeMgYQABgHGB4yBhAAGAcYHjIEEAAYHjIGEAAYCBgeMgYQABgIGB4yBhAAGAgYHjIIEAAYiQUYogRIhN4BUNDVAVj43AFwAXgBkAEAmAGcAaAB8AeqAQMwLje4AQPIAQD4AQGYAgWgAskEwgIKEAAYRxjWBBiwA8ICBxAAGIAEGA3CAggQABgIGAcYHsICCBAAGIAEGKIEmAMAiAYBkAYIkgcDMS40oAeuNLIHAzAuNLgHxgTCBwMwLjXIBws&sclient=gws-wiz-serp" target="_blank">Termos</a>
                </div>
            </div>
        </div>
        <div class="m_f_segundario">
            <h5>© 2025 PokePrimata — Projeto acadêmico</h5>
        </div>
    </footer>
</body>
</html>